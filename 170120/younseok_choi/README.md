## http와 https의 차이

 https는 Hypertext Transfer Protocol over Secure Socket Layer의 약자이다. 

https는 http의 통신을 암호화한 것이라고 생각하면 된다. http는 누군가 패킷을 볼 수 있는 가능성이 있어 어떤 내용을 주고 받는지 전부 알 수 있지만, https는 암호화가 되었기 때문에 패킷을 볼 가능성이 적다.

  Http는 이런 HTML 같은 문서를 웹 브라우저가 웹 서버에 요청하는 프로토콜이다. 프로토콜이라는 것은 일종의 대화 규칙이다. 우리가 폰뱅킹할 때를 보면 지정된 코드를 누르면 정해진 응답이 온다. 그런 것이다. 이게 없다면 웹 서버는 웹 브라우저가 무슨 페이지를 달라고 하는 건지도 모를 것이고 웹 브라우저도 웹 서버가 무슨 페이지를 보내는 건지 알 수가 없다. Http도 그냥 텍스트 교환일 뿐이다. 복잡한 바이너리 데이터가 아니라 그냥 텍스트 메시지를 주고 받는다. 물론 그 텍스트 메시지 안에 HTML 페이지도 들어 있다. 텍스트이기 때문에 만약 내가 있는 네트워크 안에서 누가 그 신호를 가로채어 본다면 내용이 그대로 보이게 된다. 만약 내가 메일을 읽고 있는데 누가 그 신호를 가로챈다면 메일 내용을 읽을 수 있을 것이다.

  Https는 http하고 거의 같지만 모든 통신 내용을 암호화하는 것이 다르다. 사실 s가 secure socket, 즉 안전한 통신망을 뜻한다. 우리는 파일에 암호를 많이 걸어 봤다. 어떤 키를 설정해서 걸면 나중에 풀 때에도 그걸 입력해 푸는 것이다. 키라는 것은 암호화를 푸는 암호 즉 패스워드같은 것이다. 웹 서버가 키 하나를 정해서 페이지를 암호화해서 사용자의 웹 브라우저로 보내고 웹 브라우저는 그 키를 이용해서 페이지를 복원한다... 이러면 좋겠지만 이렇게 간단하지 않다. 

 웹 서버는 하나이지만 사용자는 불특정 다수이다. 그런데 키를 사용자들에게 줘 버리면 아무나 암호화를 풀 수 있게 된다. 영희에게 갈 페이지를 철수도 풀어서 볼 수 있게 되는데, 이러면 암호화의 효과가 없다.

즉 페이지 암호화키가 그 페이지를 보는 특정 사용자에게만 알려져야 한다. 어떻게 이렇게 할 수 있는가? 바로 https 프로토콜이 하는 것이다. 위에서 말한 암호화방식을 사용하되 그 키를 다시 공개키로 암호화하고 인증하는 것이다. 공개 키는 쉽게 말해서 데이터를 암호화하는데 키가 두개가 필요하다는 것이다. 암호화를 푸는 데에는 그 두개 중 하나의 키만 있으면 된다.

그러나 https로 암호화 하려면 웹 서버에 부하가 생기고, 위에서 말한 서버의 인증서를 특정 업체에서 비싼 값을 주고 구매해야한다. 그래서 아무나 봐도 상관없는 페이지는 https로 남에게 보이면 안된느 금융정보나 중요한 것은 https로 하게 되는 것이다.

## 국내에 공인인증서가 생긴 배경과 그 위험성은?

1999년 전자서명법으로 인해 생겨났다. 당시 한계가 있는 인터넷 환경에서 인터넷 뱅킹과 전자상거래를 할 수 있도록 만들어진 것이다. 당시 95년에는 ssl이란 기술이 있었지만 미국에서 암호화 기술 수출을 꺼려했기 때문에 국내 암호학자들을 모아 연구를 하여 만든 것이라 볼 수 있다.

공인인증서는 쉽게 말하면 전자인감도장 같은 역할이다. 공인인증서의 원리는 다음과 같다.

1. 공인 인증 기관으로부터 본인을 인증하기 위한 사용자 인증서 파일과 개인키를 사용한다.
2. 개인키는 사용자가 필요시 다시 복호화하여 사용하도록 대칭키 알고리즘을 이용한다.
3. 대칭키 알고리즘에 사용하는 암호화 키는 공인인증서 비밀번호이다.
4. 이 비밀번호는 해쉬함수를 사용해서 얻은 출력값으로 암호화 키가 된다.
5. salt방식을 통해 공인인증서 갱신시 동일한 비밀번호라고 하더라도 암호화키는 변경된다.

위험성은 여기있다. 만약 공인인증서가 담겨있는 usb혹은 pc가 유출될 경우 비밀번호를 바꾸는 것만으로는 소용이 없다. 분실한 기기에 저장된 패스워드가 변경되지 않기 때문이다. 그러므로 유출될 경우 인증 기관을 통해 인증서를 폐기해야 한다.

물론 유출된 공인인증서에 비밀번호 때문에 걱정이 없을 수 있지만 이 또한 잘못된 것이다. 공인인증서의 비밀번호를 5회이상 틀리면 자동 폐기 되는 것이 아니다. 이는 공인인증서를 쓰는 해당 은행/증권 프로그램에서 구현한 것이기 때문에 암호를 풀기 위해 별도 프로그램을 사용한다면 무한대로 입력할 수 있다. 즉 실제 현실에서 공인인증서 암호 검증 과정에는 서버와의 네트워크 통신이 필요없다.

그리고 지난 번에 이야기 했던 active x의 문제도 크다. 이 공인인증서를 active-x의 방식으로 배포하기 때문에, 만약 유저가 피싱 사이트에 들어가서 시키는대로 active-x를 설치하였는데, 그 active-x가 공인인증서 파일과 암호를 빼앗는 것이라면? 말 그대로 대참사가 일어나게 될 것이다.
